<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>简单的web存储留言板</title>
    <style>
        textarea{
            width: 500px;
            height: 200px;
        }

    </style>
    <script type="text/javascript">
        //使用HTML5 Web 存储的sessionStorage方法进行编写一个web页面
        //功能是一个简易的web留言板。留言板信息可以永久保存。并能清除留言板内容。addInfo

        //添加留言信息
        function addInfo(){
            var info = document.getElementById("t1");
            var LStorage = window.localStorage;//获取 localStorage
            console.log("pppp ppp ",LStorage)
            if(LStorage.myBoard){
                var date = new Date();
                //获取原来键所对应的值，再加上文本框中所输入的留言信息，也就是说，键所对用的累加
                LStorage.myBoard += t1.value+"\n发表时间："+date.toLocaleDateString()+"\n";
            }else{
                var date = new Date();
                //获取原来键所对应的值，再加上文本框中所输入的留言信息，也就是说，键所对用的累加
                LStorage.myBoard = t1.value+"\n发表时间："+date.toLocaleDateString()+"\n";
            }
            upInfo()
        }

        //取出键所对应的值 显示在多行文本框中
        function upInfo() {
            var LStorage = window.localStorage;
            var  show= document.getElementById("show");
            if(window.localStorage.myBoard){
                show.value = window.localStorage.getItem("myBoard")
            }else{
                show.value = "还没有留言"
            }
        }
        
        
        //清除留言信息
        function cleanInfo(){
            window.localStorage.removeItem("myBoard");
            upInfo();
        }




    </script>
</head>
<body>
    <!--
    利用一个留言板的案例记

    HTML5本地储存

     早期web中使用cookies在客户端保存一些简单的信息，使用cookies储存永久数据存在以下问题：
        1、cookies的大小限制4KB，不适合储存大量数据
        2、浏览器还限制站点可以在用户计算机上储存的cookies的数量
        3、cookies是随HTTP事务一起被发送的，因此会浪费一部分带宽

     解决：H5很好的提供了本地存储的功能，以键值对存储的解决方案，支持容量至少为4M，不用安装任何插件。

          通过JS 一些新的API就可存储一些数据在客户端，是以键值对的方式，且不会随HTTP事务一起发送

          H5的web Storage提供了两种在客户端存储数据的方法。
            localStorage ：是一种没有时间限制的数据存储方式，可以将数据永久保存在客户端
            sessionStorage：是指支队一个session的数据存储，即将数据保存在session对象中，当关闭浏览器后，这些数据会被删除

    如何使用web Storage？
        在使用web Storage前，应检查浏览器是否支持localStorage和sessionStorage
        if(typeof(Storage)!== "undefined"){
            //Yes!localStorage and sessionStorage
        }else{
            //Sorry!
        }
    !!!!!注意  IE8以上，Firefox,Opera,Chrome和Safari 支持web Storage（web 存储）。IE7及更早的IE版本不支持web Storage（web 存储）

    web Storage 支持的属性与方法

        · getItem(key)方法:获取指定Key所存储放的value值；
        · key(index)方法：返回列表中对应索引的key值；
        · length属性：返回key/value对列表的长度；
        · removeItem(key)方法：从Storage中删除一个对应的键值对；
        · setItem(key,value)方法：将value存储到key指定的字段。
        · clear()方法：移除storage中所有key/value对。
     提示：设置、获取key/value的方法除了使用setItem()和getItem()方法以外，还分别提供了一个更简单的方法：
            设置方法：sessionStorage.someKey = 'someValue';
            获取方法：alert(sessionStorage.someKey)

    -->
<div>
    <h2>简单的web存储留言板</h2>
    <textarea id="t1"></textarea>
    <br/>
    <input type="button" class="button" onclick="addInfo()" value="留言">
    <input type="button" class="button" onclick="cleanInfo()" value="清除留言">
    <br/>
    <hr/>
    <textarea id="show" readonly="readonly"></textarea>
</div>

</body>
</html>